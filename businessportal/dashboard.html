<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Business Dashboard</title>

  <style>
    @font-face {
      font-family: 'Super Funtime';
      src: url('Super Funtime.ttf') format('truetype');
    }

    @font-face {
      font-family: 'ABeeZee';
      src: url('ABeeZee-Regular.ttf') format('truetype');
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'ABeeZee', sans-serif;
      background-color: #fefef8;
    }

    /* ===== DESKTOP STYLES ===== */
    @media (min-width: 769px) {
      .dashboard-container {
        max-width: 1300px;
        margin: 0 auto;
        padding: 20px;
      }

      .dashboard-wrapper {
        border: 5px solid #222D47;
        border-radius: 20px;
        padding: 30px;
        background-color: #fefef8;
      }

      h1 {
        font-family: 'Super Funtime', cursive;
        font-size: 2.5em;
        text-align: center;
        color: #222d47;
        margin-bottom: 30px;
      }

      .dashboard-grid {
        display: flex;
        gap: 20px;
      }

      .left-column, .right-column {
        flex: 1;
      }

      .section {
        background: #EEFAFA;
        border: 5px solid #222D47;
        border-radius: 20px;
        padding: 20px;
        margin-bottom: 20px;
      }

      .info-actions, .code-actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }

      input, button {
        font-size: 1em;
        padding: 10px;
        border: 3px solid #222D47;
        border-radius: 12px;
      }

      #verifyBtn {
        background-color: #222D47;
        color: white;
      }
    }

    /* ===== MOBILE STYLES ===== */
    @media (max-width: 768px) {
      .dashboard-container {
        width: 100%;
        padding: 12px;
      }

      .dashboard-wrapper {
        border: 5px solid #222D47;
        border-radius: 20px;
        padding: 20px;
        background-color: #fefef8;
      }

      h1 {
        font-family: 'Super Funtime', cursive;
        font-size: 1.8em;
        text-align: center;
        color: #222d47;
        margin-bottom: 20px;
      }

      .section {
        background: #EEFAFA;
        border: 5px solid #222D47;
        border-radius: 20px;
        padding: 16px;
        margin-bottom: 20px;
      }

      .dashboard-grid {
        display: block;
      }

      .info-actions, .code-actions {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 10px;
      }

      input, button {
        width: 100%;
        font-size: 1em;
        padding: 10px;
        border: 3px solid #222D47;
        border-radius: 12px;
      }

      #verifyBtn {
        background-color: #222D47;
        color: white;
      }

      .delete-button {
        font-size: 0.8em;
        padding: 4px 8px;
      }
    }
  </style>

  <script id="firebase-config" data-config="%7B%22apiKey%22%3A%22AIzaSyBJxxcGhuYspiZ9HRAlZgihgXLaA2FjPXc%22%2C%22authDomain%22%3A%22coastalcouponverifier.firebaseapp.com%22%2C%22projectId%22%3A%22coastalcouponverifier%22%2C%22storageBucket%22%3A%22coastalcouponverifier.firebasestorage.app%22%2C%22messagingSenderId%22%3A%22189807704712%22%2C%22appId%22%3A%221%3A189807704712%3Aweb%3A9427e68464115f388ebd3d%22%7D"></script>
  <script type="module" src="scripts/dashboard.js"></script>

  <script>
    const sendHeight = () => {
      const height = document.body.scrollHeight;
      window.parent.postMessage({ type: 'resize', height }, '*');
    };
    window.addEventListener('load', sendHeight);
    window.addEventListener('resize', sendHeight);
  </script>
</head>

<body>
  <div class="dashboard-container">
    <h1>Welcome to Your Dashboard</h1>
    <div class="dashboard-wrapper">
      <div class="dashboard-grid">
        <div class="left-column">
          <h2>Your Information</h2>
          <div class="section" id="business-info"></div>
          <div class="section" id="analytics">
            <p><strong>Active Customers:</strong> <span id="activeCustomers">0</span></p>
            <p><strong>Coupon Redemptions:</strong> <span id="totalRedemptions">0</span></p>
            <p><a href="mailto:contact@coastalcouponclub.com">Email contact@coastalcouponclub.com to Export Data</a></p>
          </div>
        </div>
        <div class="right-column">
          <h2>Verify Customer Code</h2>
          <div class="section">
            <div class="code-actions">
              <input type="text" id="codeInput" placeholder="Enter 10 Digit Code" />
              <button id="verifyBtn">Verify Code</button>
              <button id="redeemBtn">Redeem Code</button>
              <button id="doneBtn">Done</button>
            </div>
            <p id="redeemStatus"></p>
            <div id="dashboardMessage" class="form-message" style="display: none;"></div>
          </div>
          <div class="section" id="redemptionHistorySection">
            <h2>Redemption Log</h2>
            <ul id="redemptionHistory"></ul>
          </div>
        </div>
      </div>
      <div style="text-align: center; font-size: 0.9em; padding-top: 10px;">
        For technical support, contact <a href="mailto:admin@coastalcouponclub.com">admin@coastalcouponclub.com</a>
      </div>
    </div>
  </div>
</body>
</html>
